<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Play</title>
</head>
<style>
    * {
        margin: 0;
        padding: 0;
    }

    html,
    body {
        background: #f1f3f5;
    }

    .container {
        background-size: cover;
        min-height: 100vh;
    }

    .title,
    .button {
        display: flex;
        justify-content: center;
    }

    .title h2 {
        margin: 5%;
        font-size: 6rem;
    }

    button {
        padding: 1em;
        background: transparent;
        outline: none;
        border: .25px solid #222;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
        letter-spacing: 1px;
        font-size: 1.1rem;
        cursor: pointer;
        transition: all .3s;
    }

    button:hover {
        background: #1c1d1e;
        color: #f1f3f5;
    }
</style>

<body>
    <section class="container">
        <div class="title">
            <h2><%=homeTeam%> vs <%=awayTeam%></h2>
        </div>

        <!-- display lend button or create team button -->
        <%if(eligibility){%>
            <div class="button">
                <a href="/createteam?home=<%=homeTeam%>&away=<%=awayTeam%>&id=<%=id%>"><button>Create Team</button></a>
            </div>
            <%}else{%>
                <div class="button">
                    <button class="lend">Lend Points</button>
                </div>
                <%}%>
    </section>
</body>
<script>
    let eligibility = `<%=eligibility%>`;
    let id = `<%=id%>`;

    console.log(eligibility);

    if(eligibility === "false"){
        let lendButton = document.querySelector(".lend");

        lendButton.addEventListener("click",()=>{
            let no_of_points = prompt("How many coins ?");

            const options = {
                method : 'POST',
                body : JSON.stringify({
                    id : id,
                    coins : Number(no_of_points)
                }),
                headers : new Headers({
                    'Content-Type' : 'application/json'
                })
            }

            fetch("/lendpoints",options)
                .then(res=>res.json())
                .then((response)=>{
                    alert(response.message);
                })
                .catch(err=>console.log("Error: ",err));
        })
    }
</script>
</html>